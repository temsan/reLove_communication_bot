# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –ò–º–ø–æ—Ä—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ –∫–∞–Ω–∞–ª–æ–≤ reLove

## üéØ –¶–µ–ª—å
–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–∑ –∫–∞–Ω–∞–ª–æ–≤ reLove —á–µ—Ä–µ–∑ user-–∫–ª–∏–µ–Ω—Ç Telethon –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å –∏—Ö –ø—Ä–æ—Ñ–∏–ª–∏.

## üìã –®–∞–≥–∏

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `.env` –µ—Å—Ç—å:
```env
TG_API_ID=21834116
TG_API_HASH=3139c483fb576f2043610eb2ba7e285e
TG_SESSION=relove_bot
```

### 2. –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

```bash
python scripts/test_telethon_connection.py
```

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ:
- –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–≤ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ: +7...)
- –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∏–∑ Telegram
- –°–µ—Å—Å–∏—è —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `relove_bot.session`

–°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç:
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞—à–µ–º –∞–∫–∫–∞—É–Ω—Ç–µ
- üí¨ –°–ø–∏—Å–æ–∫ –≤–∞—à–∏—Ö –¥–∏–∞–ª–æ–≥–æ–≤
- üîç –ù–∞–π–¥–µ–Ω–Ω—ã–µ –∫–∞–Ω–∞–ª—ã reLove

### 3. –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤

```bash
python scripts/fill_profiles_from_channels.py --list-channels
```

–ü–æ–∫–∞–∂–µ—Ç –≤—Å–µ –∫–∞–Ω–∞–ª—ã –∏ —á–∞—Ç—ã —Å "relove" –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏.

### 4. –ò–º–ø–æ—Ä—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ë—ã—Å—Ç—Ä—ã–π –∏–º–ø–æ—Ä—Ç (–±–µ–∑ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª–µ–π)

```bash
python scripts/fill_profiles_from_channels.py --all --no-fill
```

–¢–æ–ª—å–∫–æ –¥–æ–±–∞–≤–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –ë–î (–±—ã—Å—Ç—Ä–æ).

#### –í–∞—Ä–∏–∞–Ω—Ç B: –ü–æ–ª–Ω—ã–π –∏–º–ø–æ—Ä—Ç —Å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ–º –ø—Ä–æ—Ñ–∏–ª–µ–π

```bash
python scripts/fill_profiles_from_channels.py --all
```

–î–æ–±–∞–≤–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ò –∑–∞–ø–æ–ª–Ω–∏—Ç –∏—Ö –ø—Ä–æ—Ñ–∏–ª–∏ (–º–µ–¥–ª–µ–Ω–Ω–µ–µ).

#### –í–∞—Ä–∏–∞–Ω—Ç C: –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–∞–Ω–∞–ª

```bash
python scripts/fill_profiles_from_channels.py --channel @reloveinfo
```

### 5. –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–π (–µ—Å–ª–∏ –¥–µ–ª–∞–ª–∏ –±—ã—Å—Ç—Ä—ã–π –∏–º–ø–æ—Ä—Ç)

```bash
python scripts/fill_profiles.py --all --batch-size 20
```

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—ã —É–≤–∏–¥–∏—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:
```
STATISTICS
==================================================
Channels processed: 3
Users found: 1250
Users added: 1100
Users updated: 150
Profiles filled: 1250
Errors: 0
==================================================
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –í –±–æ—Ç–µ (–¥–ª—è –∞–¥–º–∏–Ω–æ–≤):

```
/admin_find_users limit=10
```

### –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

```sql
SELECT COUNT(*) FROM users WHERE is_active = true;
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

### Broadcast –∫–∞–Ω–∞–ª—ã
–î–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö broadcast –∫–∞–Ω–∞–ª–æ–≤ (–≥–¥–µ —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω –ø—É–±–ª–∏–∫—É–µ—Ç) **–Ω–µ–ª—å–∑—è** –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ —á–µ—Ä–µ–∑ API. –ú–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ:
- –ê–¥–º–∏–Ω–æ–≤
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω—ã)

### –ì—Ä—É–ø–ø—ã –∏ —Å—É–ø–µ—Ä–≥—Ä—É–ø–ø—ã
–î–ª—è –≥—Ä—É–ø–ø –∏ —Å—É–ø–µ—Ä–≥—Ä—É–ø–ø –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (–µ—Å–ª–∏ –≤—ã —É—á–∞—Å—Ç–Ω–∏–∫).

### Rate limits
Telegram –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤. –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–µ–ª–∞–µ—Ç –ø–∞—É–∑—ã, –Ω–æ –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–π–º–µ—Ç –≤—Ä–µ–º—è.

## üêõ Troubleshooting

### "Could not find the input entity"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ username –∫–∞–Ω–∞–ª–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã —É—á–∞—Å—Ç–Ω–∏–∫ –∫–∞–Ω–∞–ª–∞

### "A wait of X seconds is required"
- Telegram rate limit
- –ü–æ–¥–æ–∂–¥–∏—Ç–µ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è

### "The channel specified is private"
- –í—Å—Ç—É–ø–∏—Ç–µ –≤ –∫–∞–Ω–∞–ª —Å–Ω–∞—á–∞–ª–∞

### "No reLove channels found"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—ã –≤—Å—Ç—É–ø–∏–ª–∏ –≤ –∫–∞–Ω–∞–ª—ã reLove
- –ö–∞–Ω–∞–ª—ã –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å "relove" –∏–ª–∏ "—Ä–µ–ª–æ–≤" –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏

## üìù –õ–æ–≥–∏

–í—Å–µ –ª–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤:
- `logs/fill_profiles_from_channels.log` - –¥–µ—Ç–∞–ª—å–Ω—ã–π –ª–æ–≥
- –ö–æ–Ω—Å–æ–ª—å - –æ—Å–Ω–æ–≤–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è

## üîÑ –†–µ–≥—É–ª—è—Ä–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–î–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å cron job:

```bash
# –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 3:00 —É—Ç—Ä–∞
0 3 * * * cd /path/to/project && python scripts/fill_profiles_from_channels.py --all --no-fill
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –±–æ—Ç–∞ (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤ `relove_bot/tasks/background_tasks.py`).

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –≤ –±–∞–∑–µ –µ—Å—Ç—å –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–∑ –∫–∞–Ω–∞–ª–æ–≤ reLove —Å –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ—Ñ–∏–ª—è–º–∏.

–ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- –ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ—Ç–æ–∫–æ–≤
- –¢–∞—Ä–≥–µ—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞—Å—Å—ã–ª–∫–∏
- –ê–Ω–∞–ª–∏—Ç–∏–∫—É –∞—É–¥–∏—Ç–æ—Ä–∏–∏
