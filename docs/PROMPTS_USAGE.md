# üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–º–ø—Ç–æ–≤

–ö—Ä–∞—Ç–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–º–ø—Ç–æ–≤ –≤ –±–æ—Ç–µ.

---

## üìç –ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∫–æ–¥?

```
relove_bot/services/prompt_selector.py    ‚Äî –í—ã–±–æ—Ä –ø—Ä–æ–º–ø—Ç–∞
relove_bot/services/natasha_service.py    ‚Äî –°–µ—Ä–≤–∏—Å –ù–∞—Ç–∞—à–∏
relove_bot/handlers/admin_prompts_handler.py ‚Äî –ê–¥–º–∏–Ω-–º–µ–Ω—é
```

---

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
2. –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–µ–º—É
3. –í—ã–±–∏—Ä–∞–µ—Ç—Å—è –ø–æ–¥—Ö–æ–¥—è—â–∏–π –ø—Ä–æ–º–ø—Ç
4. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å –∫ LLM
5. –û—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

### –¢–µ–º—ã
- **‚ö° –≠–Ω–µ—Ä–≥–∏—è** ‚Äî —Ä–∏—Ç—É–∞–ª—ã, –º–µ–¥–∏—Ç–∞—Ü–∏–∏, –æ—â—É—â–µ–Ω–∏—è
- **üíñ –û—Ç–Ω–æ—à–µ–Ω–∏—è** ‚Äî –º—É–∂—á–∏–Ω–∞, –∂–µ–Ω—â–∏–Ω–∞, –±–∞–ª–∞–Ω—Å
- **üåô –ü—Ä–æ—à–ª—ã–µ –∂–∏–∑–Ω–∏** ‚Äî –ø–ª–∞–Ω–µ—Ç—ã, –∞—Ä—Ö–µ—Ç–∏–ø—ã, —Ö—Ä–∞–º—ã
- **üíº –ë–∏–∑–Ω–µ—Å** ‚Äî –ø—Ä–æ–µ–∫—Ç—ã, —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
- **ü§ñ –ê–≤—Ç–æ** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

---

## üë®‚Äçüíº –ê–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥—ã (–≤–∏–¥–Ω—ã —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—É)

### –ú–µ–Ω—é
```
/admin_prompts ‚Äî –æ—Ç–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω-–º–µ–Ω—é
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–º–æ–π
```
/set_topic_for <user_id> <topic> ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–º—É –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
/my_topic ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â—É—é —Ç–µ–º—É (—Å –∫–Ω–æ–ø–∫–∞–º–∏)
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–µ–π
```
/clear_history <user_id> ‚Äî –æ—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–∞
```

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
```
/stats ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¥–∏–∞–ª–æ–≥–∞–º
/topics ‚Äî —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–µ–º
```

**–í–∞–∂–Ω–æ**: –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –≤–∏–¥–Ω—ã —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—É. –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫–æ–º–∞–Ω–¥—ã –º–æ–ª—á–∞ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è.

---

## üí° –ü—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–º—É –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```
/set_topic_for 123456789 energy
```
–†–µ–∑—É–ª—å—Ç–∞—Ç: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 123456789 –±—É–¥–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –æ—Ç–≤–µ—Ç—ã –≤ —Å—Ç–∏–ª–µ —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–æ–π —Ä–∞–±–æ—Ç—ã

### –ü—Ä–∏–º–µ—Ä 2: –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é
```
/clear_history 123456789
```
–†–µ–∑—É–ª—å—Ç–∞—Ç: –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—á–∏—â–µ–Ω–∞

### –ü—Ä–∏–º–µ—Ä 3: –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
```
/stats
```
–†–µ–∑—É–ª—å—Ç–∞—Ç: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Å–æ–æ–±—â–µ–Ω–∏–π

### –ü—Ä–∏–º–µ—Ä 4: –í—ã–±—Ä–∞—Ç—å —Ç–µ–º—É —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏
```
/my_topic
```
–†–µ–∑—É–ª—å—Ç–∞—Ç: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â—É—é —Ç–µ–º—É —Å –∫–Ω–æ–ø–∫–∞–º–∏ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è

---

## üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π

```python
from relove_bot.services.natasha_service import get_natasha_service
from relove_bot.services.prompt_selector import DialogTopic

@router.message()
async def handle_message(message: types.Message):
    """–û–±—Ä–∞–±–æ—Ç–∞–π —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    
    # –ü–æ–ª—É—á–∏ —Å–µ—Ä–≤–∏—Å
    natasha_service = get_natasha_service(llm_client)
    
    # –ü–æ–ª—É—á–∏ –æ—Ç–≤–µ—Ç (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –ø—Ä–æ–º–ø—Ç–∞)
    result = await natasha_service.get_response(
        user_id=str(message.from_user.id),
        message=message.text,
        user_profile=None  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
    )
    
    if result["success"]:
        await message.answer(result["response"])
    else:
        await message.answer(f"‚ùå –û—à–∏–±–∫–∞: {result['error']}")
```

---

## üìä –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–µ–º—ã

| –¢–µ–º–∞ | ID | –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ |
|------|----|----|
| –≠–Ω–µ—Ä–≥–∏—è | `energy` | —ç–Ω–µ—Ä–≥–∏—è, —Ä–∏—Ç—É–∞–ª, –º–µ–¥–∏—Ç–∞—Ü–∏—è, –æ—â—É—â–µ–Ω–∏–µ |
| –û—Ç–Ω–æ—à–µ–Ω–∏—è | `relationships` | –º—É–∂—á–∏–Ω–∞, –∂–µ–Ω—â–∏–Ω–∞, –æ—Ç–Ω–æ—à–µ–Ω–∏—è, –ø–∞—Ä—Ç–Ω–µ—Ä |
| –ü—Ä–æ—à–ª—ã–µ –∂–∏–∑–Ω–∏ | `past_lives` | –ø—Ä–æ—à–ª–∞—è –∂–∏–∑–Ω—å, –ø–ª–∞–Ω–µ—Ç–∞, —Ö—Ä–∞–º, –∞—Ä—Ö–µ—Ç–∏–ø |
| –ë–∏–∑–Ω–µ—Å | `business` | –±–∏–∑–Ω–µ—Å, –ø—Ä–æ–µ–∫—Ç, —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è |
| –û–±—â–∏–π | `general` | (–¥—Ä—É–≥–∏–µ —Ç–µ–º—ã) |
| –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ | `diagnostic` | (–ø–µ—Ä–≤—ã–π –∫–æ–Ω—Ç–∞–∫—Ç) |

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç

- [x] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –ø—Ä–æ–º–ø—Ç–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- [x] –ê–¥–º–∏–Ω-–º–µ–Ω—é —Å–æ–∑–¥–∞–Ω–æ
- [x] –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [x] –ö–Ω–æ–ø–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ç–µ–º—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [x] –°–µ—Ä–≤–∏—Å –ù–∞—Ç–∞—à–∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–¥–º–∏–Ω–∞

–ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥—ã, —É—Å—Ç–∞–Ω–æ–≤–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env`:

```
ADMIN_ID=123456789
```

–ó–∞–º–µ–Ω–∏ `123456789` –Ω–∞ —Å–≤–æ–π ID –≤ Telegram.

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [ADMIN_SETUP.md](ADMIN_SETUP.md)

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π —Å–µ—Ä–≤–∏—Å**
```python
from relove_bot.services.natasha_service import get_natasha_service
```

2. **–ò—Å–ø–æ–ª—å–∑—É–π –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ**
```python
result = await natasha_service.get_response(user_id, message)
```

3. **–û—Ç–ø—Ä–∞–≤—å –æ—Ç–≤–µ—Ç**
```python
await message.answer(result["response"])
```

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ

