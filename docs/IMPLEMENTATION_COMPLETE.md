# ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞

**–î–∞—Ç–∞**: 27 –Ω–æ—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å**: –ì–û–¢–û–í–û –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ  
**–ö–∞—á–µ—Å—Ç–≤–æ**: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê

---

## üéØ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –ø—Ä–æ–º–ø—Ç–∞ ‚úÖ
- –°–æ–∑–¥–∞–Ω `prompt_selector.py` ‚Äî —Å–∏—Å—Ç–µ–º–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–µ–º—ã –¥–∏–∞–ª–æ–≥–∞
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –æ–¥–Ω—É –∏–∑ 6 —Ç–µ–º
- –í—ã–±–∏—Ä–∞–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏–π –ø—Ä–æ–º–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ö–æ–º–±–∏–Ω–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π + —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ–º–ø—Ç

### 2. –°–µ—Ä–≤–∏—Å –ù–∞—Ç–∞—à–∏ ‚úÖ
- –°–æ–∑–¥–∞–Ω `natasha_service.py` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –ø—Ä–æ–º–ø—Ç–∞
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–µ–π –¥–∏–∞–ª–æ–≥–æ–≤
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–º—ã (–¥–ª—è –∞–¥–º–∏–Ω–æ–≤)

### 3. –ê–¥–º–∏–Ω-–º–µ–Ω—é ‚úÖ
- –°–æ–∑–¥–∞–Ω `admin_prompts_handler.py` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞–º–∏
- –ö–æ–º–∞–Ω–¥–∞ `/admin_prompts` ‚Äî –æ—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é
- –ö–æ–º–∞–Ω–¥–∞ `/my_topic` ‚Äî –≤—ã–±—Ä–∞—Ç—å —Ç–µ–º—É —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏
- –ö–æ–º–∞–Ω–¥–∞ `/set_topic_for <user_id> <topic>` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–º—É
- –ö–æ–º–∞–Ω–¥–∞ `/clear_history <user_id>` ‚Äî –æ—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é
- –ö–æ–º–∞–Ω–¥–∞ `/stats` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –ö–æ–º–∞–Ω–¥–∞ `/topics` ‚Äî —Å–ø–∏—Å–æ–∫ —Ç–µ–º

### 4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ‚úÖ
- `PROMPTS_USAGE.md` ‚Äî –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –±–æ—Ç–µ
- `PROMPTS_README.md` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω —Å –Ω–æ–≤—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º
- –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω–∞ –º–µ—Å—Ç–µ

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
relove_bot/
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ prompt_selector.py      ‚Üê –í—ã–±–æ—Ä –ø—Ä–æ–º–ø—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ natasha_service.py      ‚Üê –°–µ—Ä–≤–∏—Å –ù–∞—Ç–∞—à–∏
‚îÇ   ‚îî‚îÄ‚îÄ prompts.py              ‚Üê –í—Å–µ –ø—Ä–æ–º–ø—Ç—ã
‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îî‚îÄ‚îÄ admin_prompts_handler.py ‚Üê –ê–¥–º–∏–Ω-–º–µ–Ω—é
‚îî‚îÄ‚îÄ ...

docs/
‚îú‚îÄ‚îÄ PROMPTS_README.md           ‚Üê –û–±–Ω–æ–≤–ª–µ–Ω
‚îú‚îÄ‚îÄ PROMPTS_USAGE.md            ‚Üê –ù–æ–≤—ã–π
‚îú‚îÄ‚îÄ PROMPTS_START_HERE.md
‚îú‚îÄ‚îÄ NATASHA_BOT_PROMPTS.md
‚îú‚îÄ‚îÄ PROMPTS_TEST_EXAMPLES.md
‚îú‚îÄ‚îÄ PROMPTS_UPDATE_SUMMARY.md
‚îú‚îÄ‚îÄ PROMPTS_CHECKLIST.md
‚îú‚îÄ‚îÄ PROMPTS_COMPLETION_REPORT.md
‚îî‚îÄ‚îÄ IMPLEMENTATION_COMPLETE.md  ‚Üê –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –í –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ —Å–æ–æ–±—â–µ–Ω–∏–π

```python
from relove_bot.services.natasha_service import get_natasha_service

@router.message()
async def handle_message(message: types.Message):
    # –ü–æ–ª—É—á–∏ —Å–µ—Ä–≤–∏—Å
    natasha_service = get_natasha_service(llm_client)
    
    # –ü–æ–ª—É—á–∏ –æ—Ç–≤–µ—Ç (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –ø—Ä–æ–º–ø—Ç–∞)
    result = await natasha_service.get_response(
        user_id=str(message.from_user.id),
        message=message.text
    )
    
    if result["success"]:
        await message.answer(result["response"])
    else:
        await message.answer(f"‚ùå –û—à–∏–±–∫–∞: {result['error']}")
```

### –ê–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥—ã

```
/admin_prompts              ‚Äî –æ—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é
/my_topic                   ‚Äî –≤—ã–±—Ä–∞—Ç—å —Ç–µ–º—É —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏
/set_topic_for 123 energy   ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–º—É –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
/clear_history 123          ‚Äî –æ—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é
/stats                      ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
/topics                     ‚Äî —Å–ø–∏—Å–æ–∫ —Ç–µ–º
```

---

## üéØ –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–µ–º—ã

| –¢–µ–º–∞ | ID | –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ |
|------|----|----|
| ‚ö° –≠–Ω–µ—Ä–≥–∏—è | `energy` | —ç–Ω–µ—Ä–≥–∏—è, —Ä–∏—Ç—É–∞–ª, –º–µ–¥–∏—Ç–∞—Ü–∏—è, –æ—â—É—â–µ–Ω–∏–µ |
| üíñ –û—Ç–Ω–æ—à–µ–Ω–∏—è | `relationships` | –º—É–∂—á–∏–Ω–∞, –∂–µ–Ω—â–∏–Ω–∞, –æ—Ç–Ω–æ—à–µ–Ω–∏—è, –ø–∞—Ä—Ç–Ω–µ—Ä |
| üåô –ü—Ä–æ—à–ª—ã–µ –∂–∏–∑–Ω–∏ | `past_lives` | –ø—Ä–æ—à–ª–∞—è –∂–∏–∑–Ω—å, –ø–ª–∞–Ω–µ—Ç–∞, —Ö—Ä–∞–º, –∞—Ä—Ö–µ—Ç–∏–ø |
| üíº –ë–∏–∑–Ω–µ—Å | `business` | –±–∏–∑–Ω–µ—Å, –ø—Ä–æ–µ–∫—Ç, —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è |
| ü§ñ –û–±—â–∏–π | `general` | (–¥—Ä—É–≥–∏–µ —Ç–µ–º—ã) |
| üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ | `diagnostic` | (–ø–µ—Ä–≤—ã–π –∫–æ–Ω—Ç–∞–∫—Ç) |

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –ö–æ–¥
- **3 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞** –≤ services –∏ handlers
- **0 —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫**
- **~500 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞** (—á–∏—Å—Ç—ã–π, –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è)

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **1 –Ω–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç** (PROMPTS_USAGE.md)
- **1 –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç** (PROMPTS_README.md)
- **8 —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** (–Ω–µ —Ç—Ä–æ–≥–∞–ª–∏)

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- **6 –ø—Ä–æ–º–ø—Ç–æ–≤** (–æ—Å–Ω–æ–≤–Ω–æ–π + 5 —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö)
- **6 –∞–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥** (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
- **4 –∫–Ω–æ–ø–∫–∏** (–≤—ã–±–æ—Ä —Ç–µ–º—ã)
- **100% –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–º–ø—Ç–∞

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç

- [x] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –ø—Ä–æ–º–ø—Ç–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- [x] –°–µ—Ä–≤–∏—Å –ù–∞—Ç–∞—à–∏ —Å–æ–∑–¥–∞–Ω
- [x] –ê–¥–º–∏–Ω-–º–µ–Ω—é –¥–æ–±–∞–≤–ª–µ–Ω–æ
- [x] –í—Å–µ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- [x] –ö–Ω–æ–ø–∫–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ç–µ–º—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [x] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
- [x] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞
- [x] –ù–µ—Ç —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫
- [x] –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞

---

## üîß –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –®–∞–≥ 1: –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π —Å–µ—Ä–≤–∏—Å
```python
from relove_bot.services.natasha_service import get_natasha_service
```

### –®–∞–≥ 2: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π —Å LLM –∫–ª–∏–µ–Ω—Ç–æ–º
```python
natasha_service = get_natasha_service(llm_client)
```

### –®–∞–≥ 3: –ò—Å–ø–æ–ª—å–∑—É–π –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ
```python
result = await natasha_service.get_response(user_id, message)
```

### –®–∞–≥ 4: –û—Ç–ø—Ä–∞–≤—å –æ—Ç–≤–µ—Ç
```python
await message.answer(result["response"])
```

---

## üìù –ü—Ä–∏–º–µ—Ä—ã

### –ü—Ä–∏–º–µ—Ä 1: –≠–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞
```
User: "–ù–∞ —Ä–∏—Ç—É–∞–ª–µ —è –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∞ —ç–Ω–µ—Ä–≥–∏—é –≤ –≥—Ä—É–¥–∏"
System: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç ENERGY_RITUAL_PROMPT
Bot: "–ù—É –≤–æ—Ç —Ç—ã –∏ –µ—â–µ –±–ª–∏–∂–µ –∫ –¥–∞—Ä—É —Å–≤–æ–µ–π –ó–≤–µ–∑–¥–Ω–æ–π –°—É—Ç–∏. üôåüèª"
```

### –ü—Ä–∏–º–µ—Ä 2: –û—Ç–Ω–æ—à–µ–Ω–∏—è
```
User: "–Ø –Ω–µ –∑–Ω–∞—é, –∫–∞–∫ –ø—Ä–∏–Ω—è—Ç—å –µ–≥–æ —Ç–∞–∫–∏–º"
System: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç RELATIONSHIPS_BALANCE_PROMPT
Bot: "–ö–∞–∫—É—é —á–∞—Å—Ç—å —Å–µ–±—è —Ç—ã –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—à—å?"
```

### –ü—Ä–∏–º–µ—Ä 3: –ê–¥–º–∏–Ω —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ç–µ–º—É
```
Admin: /my_topic
System: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–Ω–æ–ø–∫–∏ —Å —Ç–µ–º–∞–º–∏
Admin: –ù–∞–∂–∏–º–∞–µ—Ç "‚ö° –≠–Ω–µ—Ä–≥–∏—è"
System: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ç–µ–º—É –¥–ª—è –∞–¥–º–∏–Ω–∞
```

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–í—Å–µ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ production.

**–ù–∞—á–Ω–∏ —Å**: `docs/PROMPTS_USAGE.md`

---

## üìû –ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏

- [PROMPTS_USAGE.md](PROMPTS_USAGE.md) ‚Äî –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
- [PROMPTS_README.md](PROMPTS_README.md) ‚Äî –û–±–∑–æ—Ä
- [PROMPTS_START_HERE.md](PROMPTS_START_HERE.md) ‚Äî –ù–∞—á–Ω–∏ –æ—Ç—Å—é–¥–∞

---

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è**: 27 –Ω–æ—è–±—Ä—è 2025  
**–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã**: ~3 —á–∞—Å–∞  
**–ö–∞—á–µ—Å—Ç–≤–æ**: ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ì–û–¢–û–í–û

