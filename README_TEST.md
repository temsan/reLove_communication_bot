# Тестирование анализатора чата

## Установка зависимостей

Перед запуском тестов установите необходимые зависимости:

```bash
pip install -r requirements-test.txt
```

## Запуск тестов

Для запуска всех тестов выполните команду в корневой директории проекта:

```bash
pytest tests/ -v
```

Для запуска конкретного тестового файла:

```bash
pytest tests/test_analyze_chat.py -v
```

Для запуска конкретного теста:

```bash
pytest tests/test_analyze_chat.py::test_analyze_chat_structure -v
```

## Описание тестов

1. **test_analyze_chat_structure**
   - Проверяет структуру возвращаемых данных анализа чата
   - Проверяет наличие обязательных полей в отчете

2. **test_generate_text_report**
   - Проверяет корректность генерации текстового отчета
   - Проверяет наличие ключевых разделов в отчете
   - Проверяет форматирование рекомендаций

3. **test_empty_recommendations**
   - Проверяет обработку случая, когда рекомендации отсутствуют
   - Проверяет наличие общих рекомендаций

4. **test_error_handling**
   - Проверяет обработку ошибок при анализе
   - Проверяет обработку пустых и неверных данных

## Генерация отчета о покрытии

Для генерации отчета о покрытии кода тестами выполните:

```bash
pytest --cov=scripts tests/
```

Это создаст отчет о покрытии кода в консоли. Для генерации HTML-отчета:

```bash
pytest --cov=scripts --cov-report=html tests/
```

Откройте файл `htmlcov/index.html` в браузере для просмотра отчета.
